<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example: Ideology detection • quallmer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../../../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../../../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../../../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../../../favicon.ico">
<link rel="manifest" href="../../../site.webmanifest">
<script src="../../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../../deps/search-1.0.0/fuse.min.js"></script><script src="../../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../../pkgdown.js"></script><meta property="og:title" content="Example: Ideology detection">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../../index.html">quallmer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../../../articles/getting-started.html">Quick start guide</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/openai.html">Signing up for an openai API key</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/ollama.html">Working with an open-source Ollama model</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/predefined.html">Using predefined tasks</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/customtask.html">Defining custom tasks</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/validate.html">Using the Agreement App</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/trail.html">The quallmer trail</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-predefined-tasks" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Predefined tasks</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-predefined-tasks">
<li><a class="dropdown-item" href="../../../articles/pkgdown/examples/overview.html">Overview of predefined tasks</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/examples/task_sentiment.html">Sentiment analysis</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/examples/task_stance.html">Stance detection / position taking</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/examples/task_ideology.html">Ideological scaling</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/examples/task_salience.html">Salience of topics</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/examples/task_fact.html">Fact-checking</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SeraphineM/quallmer" aria-label="View on GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="task_ideology_files/kePrint-0.0.1/kePrint.js"></script><link href="task_ideology_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../../logo.png" class="logo" alt=""><h1>Example: Ideology detection</h1>
            
      

      <div class="d-none name"><code>task_ideology.Rmd</code></div>
    </div>

    
    
<p>The <code><a href="../../../reference/annotate.html">annotate()</a></code> function with a predefined
<code><a href="../../../reference/task_ideology.html">task_ideology()</a></code> allows you to perform ideological scaling
(0-10) on texts regarding a specified ideological dimension. In this
example, we will demonstrate how to use the <code><a href="../../../reference/task_ideology.html">task_ideology()</a></code>
for ideology detection on a sample corpus of innaugural speeches from
U.S. presidents. We will use the dimension “inclusive–exclusive” as an
example. To refine the task, we will also provide a definition of the
dimension (optional).</p>
<div class="section level3">
<h3 id="loading-packages-and-data">Loading packages and data<a class="anchor" aria-label="anchor" href="#loading-packages-and-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We will use the quanteda package </span></span>
<span><span class="co"># for loading a sample corpus of innaugural speeches</span></span>
<span><span class="co"># If you have not yet installed the quanteda package, you can do so by:</span></span>
<span><span class="co"># install.packages("quanteda")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Package version: 4.3.1</span></span>
<span><span class="co">## Unicode version: 15.1</span></span>
<span><span class="co">## ICU version: 74.2</span></span></code></pre>
<pre><code><span><span class="co">## Parallel computing: disabled</span></span></code></pre>
<pre><code><span><span class="co">## See https://quanteda.io for tutorials and examples.</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://seraphinem.github.io/quallmer/">quallmer</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: ellmer</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For educational purposes, </span></span>
<span><span class="co"># we will use a subset of the inaugural speeches corpus</span></span>
<span><span class="co"># The three most recent speeches in the corpus</span></span>
<span><span class="va">data_corpus_inaugural</span> <span class="op">&lt;-</span> <span class="fu">quanteda</span><span class="fu">::</span><span class="va"><a href="https://quanteda.io/reference/data_corpus_inaugural.html" class="external-link">data_corpus_inaugural</a></span><span class="op">[</span><span class="fl">57</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-annotate-for-ideological-scaling-of-texts">Using <code>annotate()</code> for ideological scaling of texts<a class="anchor" aria-label="anchor" href="#using-annotate-for-ideological-scaling-of-texts"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define ideological dimension</span></span>
<span><span class="va">dimension</span> <span class="op">&lt;-</span> <span class="st">"inclusive–exclusive"</span></span>
<span><span class="co"># Provide definition for the dimension</span></span>
<span><span class="va">definition</span> <span class="op">&lt;-</span> <span class="st">"Inclusive language emphasizes equal rights, diversity, pluralism, </span></span>
<span><span class="st">and protection of minorities, whereas exclusive language emphasizes exclusion </span></span>
<span><span class="st">of groups, national homogeneity, and restricting rights."</span></span>
<span><span class="co"># Apply predefined ideology task with task_ideology() in the annotate() function</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/annotate.html">annotate</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, task <span class="op">=</span> <span class="fu"><a href="../../../reference/task_ideology.html">task_ideology</a></span><span class="op">(</span><span class="va">dimension</span>, <span class="va">definition</span><span class="op">)</span>,</span>
<span>                   model_name <span class="op">=</span> <span class="st">"openai/gpt-4o"</span>,</span>
<span>                   params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 3 -&gt; 1 | <span style="color: #00BB00;">■■■■■■■■■                       </span>  25%</span></span></code></pre>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 4 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
score
</th>
<th style="text-align:left;">
explanation
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2013-Obama
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
The text emphasizes inclusivity, highlighting themes of equality,
diversity, and collective action. It references the importance of equal
rights for women, LGBTQ+ individuals, and immigrants, and stresses the
need for unity and shared responsibility. Phrases like ‘all men are
created equal,’ ‘our journey is not complete until our gay brothers and
sisters are treated like anyone else under the law,’ and ‘a better way
to welcome the striving, hopeful immigrants’ underscore an inclusive
ideology.
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-Trump
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
The text emphasizes national homogeneity and prioritizes American
interests with phrases like “America first” and “buy American and hire
American.” It highlights protectionism and a focus on American workers
and borders, suggesting an exclusive stance. However, it also includes
some inclusive elements, such as unity and equality among Americans,
regardless of race, with statements like “we all bleed the same red
blood of patriots.” Overall, the emphasis on national interests and
protectionism leans towards exclusivity.
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-Biden
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
The text emphasizes unity, inclusion, and addressing systemic issues
like racial justice and political extremism. It calls for treating each
other with dignity and respect, and highlights the importance of
diversity and pluralism. Phrases like ‘uniting our people,’ ‘delivering
racial justice,’ and ‘rejecting a culture in which facts themselves are
manipulated’ support an inclusive ideology.
</td>
</tr>
<tr>
<td style="text-align:left;">
2025-Trump
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
The text emphasizes national sovereignty, exclusion of certain groups,
and a focus on national homogeneity. Phrases like “put America first,”
“reclaim our sovereignty,” and “halt illegal entry” suggest an exclusive
stance. The mention of “only two genders” and ending “socially
engineered race and gender” policies further supports exclusivity. While
there are mentions of unity and diversity, the overall tone and policy
proposals lean towards exclusivity.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="adjusting-the-ideology-scaling-task">Adjusting the ideology scaling task<a class="anchor" aria-label="anchor" href="#adjusting-the-ideology-scaling-task"></a>
</h3>
<p>You can customize the ideological scaling task by defining your own
task with <code><a href="../../../reference/task.html">task()</a></code> (for a more detailed explanation, <a href="https://seraphinem.github.io/quallmer/articles/pkgdown/tutorials/customtask.html">see
our “Defining custom tasks” tutorial</a>). For example, you might like
to change the scale from 0-10 to -5 to +5.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">custom_ideology</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/task.html">task</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Ideological scaling"</span>,</span>
<span>    system_prompt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="st">"You are an expert political scientist performing ideological text scaling."</span>,</span>
<span>      <span class="st">"Task:"</span>,</span>
<span>      <span class="st">"- Read each short text carefully."</span>,</span>
<span>      <span class="st">"- Place the text on a -5 to +5 scale for the following ideological dimension: "</span>,</span>
<span>      <span class="va">dimension</span>, </span>
<span>      <span class="va">definition</span></span>
<span>    <span class="op">)</span>,</span>
<span>    type_def <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_object</a></span><span class="op">(</span></span>
<span>      score       <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_integer</a></span><span class="op">(</span><span class="st">"Ideological position on the specified dimension (0–10, where -5 = first pole, +5 = second pole)"</span><span class="op">)</span>,</span>
<span>      explanation <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/type_boolean.html" class="external-link">type_string</a></span><span class="op">(</span><span class="st">"Brief justification for the assigned score, referring to specific elements in the text"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    input_type <span class="op">=</span> <span class="st">"text"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co"># Apply the custom task</span></span>
<span><span class="va">custom_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/annotate.html">annotate</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, task <span class="op">=</span> <span class="va">custom_ideology</span>,</span>
<span>                          model_name <span class="op">=</span> <span class="st">"openai/gpt-4o"</span>,</span>
<span>                          params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 3 -&gt; 1 | <span style="color: #00BB00;">■■■■■■■■■                       </span>  25%</span></span></code></pre>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 4 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<table class="table table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
score
</th>
<th style="text-align:left;">
explanation
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2013-Obama
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
The text strongly emphasizes inclusivity, highlighting themes of
equality, diversity, and collective action. It advocates for equal
rights across gender, sexual orientation, and socioeconomic status, and
stresses the importance of welcoming immigrants and supporting
marginalized groups. The language consistently promotes pluralism and
the protection of minorities, aligning with an inclusive ideology.
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-Trump
</td>
<td style="text-align:right;">
-2
</td>
<td style="text-align:left;">
The text emphasizes national homogeneity and prioritizes American
interests with phrases like “America first” and “protect our borders.”
It highlights exclusionary themes by focusing on protecting American
jobs and industries from foreign influence. However, it also includes
some inclusive elements, such as unity among Americans regardless of
race, which moderates the exclusivity slightly.
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-Biden
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
The text emphasizes unity, inclusion, and the protection of democracy,
highlighting themes of racial justice, equality, and the rejection of
division. It calls for overcoming political extremism and systemic
racism, and promotes a vision of America that is inclusive and united.
The language is inclusive, focusing on bringing people together and
addressing common challenges collectively.
</td>
</tr>
<tr>
<td style="text-align:left;">
2025-Trump
</td>
<td style="text-align:right;">
-3
</td>
<td style="text-align:left;">
The text emphasizes national sovereignty, border control, and exclusion
of ‘criminal aliens,’ which aligns with exclusive language. It also
mentions ending policies that socially engineer race and gender,
suggesting a move away from diversity and inclusion efforts. While there
are mentions of unity and support for various communities, the overall
focus on national homogeneity and restrictive policies places it towards
the exclusive end of the scale.
</td>
</tr>
</tbody>
</table>
<p>In this example, we demonstrated how to use the
<code><a href="../../../reference/task_ideology.html">task_ideology()</a></code> for scaling texts regarding their
ideological position on a specified dimension. We also showed how to
customize the task using the <code><a href="../../../reference/task.html">task()</a></code> function for more
tailored annotation needs, e.g., changing the scale from 0-10 to -5 to
+5. Now you can apply these techniques to your own text data for
ideological analysis!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Seraphine F. Maerz, Kenneth Benoit.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
