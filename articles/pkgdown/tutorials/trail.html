<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The quallmer trail • quallmer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../../../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../../../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../../../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../../../favicon.ico">
<link rel="manifest" href="../../../site.webmanifest">
<script src="../../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../../deps/search-1.0.0/fuse.min.js"></script><script src="../../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../../pkgdown.js"></script><meta property="og:title" content="The quallmer trail">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../../index.html">quallmer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../../../articles/getting-started.html">Quick start guide</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/openai.html">Signing up for an OpenAI API key</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/ollama.html">Working with an open-source Ollama model</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/custom-codebook.html">Creating codebooks</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/compare.html">Comparing and replicating coded results</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/trail.html">The quallmer trail</a></li>
    <li><a class="dropdown-item" href="../../../articles/pkgdown/tutorials/validate.html">Using the Validate App (quallmer.app)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SeraphineM/quallmer" aria-label="View on GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../../logo.png" class="logo" alt=""><h1>The quallmer trail</h1>
            
      

      <div class="d-none name"><code>trail.Rmd</code></div>
    </div>

    
    
<p>In this tutorial, we will explore the quallmer trail system, which
automatically captures provenance metadata for full workflow
traceability. The trail system helps you:</p>
<ul>
<li>Track the complete history of your coding workflow</li>
<li>Document model parameters and settings used</li>
<li>Assess robustness of downstream analyses</li>
<li>Maintain parent-child relationships across coding runs</li>
<li>Export provenance information for reproducibility</li>
<li>Generate human-readable reports of your analysis pipeline</li>
</ul>
<div class="section level2">
<h2 id="understanding-provenance-tracking">Understanding provenance tracking<a class="anchor" aria-label="anchor" href="#understanding-provenance-tracking"></a>
</h2>
<p>All <code>qlm_coded</code>, <code>qlm_comparison</code>, and
<code>qlm_validation</code> objects in quallmer automatically capture
provenance metadata, including:</p>
<ul>
<li>
<strong>Run name</strong>: A unique identifier for each coding
run</li>
<li>
<strong>Timestamp</strong>: When the coding was executed</li>
<li>
<strong>Model</strong>: The LLM model and parameters used</li>
<li>
<strong>Codebook</strong>: The coding instructions applied</li>
<li>
<strong>Parent runs</strong>: Links to previous runs in a
replication chain</li>
<li>
<strong>Metadata</strong>: Package versions, number of units coded,
etc.</li>
</ul>
<p>This metadata enables full workflow traceability.</p>
</div>
<div class="section level2">
<h2 id="loading-packages-and-data">Loading packages and data<a class="anchor" aria-label="anchor" href="#loading-packages-and-data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># We will use the quanteda package</span></span>
<span><span class="co"># for loading a sample corpus of inaugural speeches</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Package version: 4.3.1</span></span>
<span><span class="co">## Unicode version: 15.1</span></span>
<span><span class="co">## ICU version: 74.2</span></span></code></pre>
<pre><code><span><span class="co">## Parallel computing: disabled</span></span></code></pre>
<pre><code><span><span class="co">## See https://quanteda.io for tutorials and examples.</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://seraphinem.github.io/quallmer/">quallmer</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: ellmer</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For educational purposes,</span></span>
<span><span class="co"># we will use a subset of the inaugural speeches corpus</span></span>
<span><span class="va">data_corpus_inaugural</span> <span class="op">&lt;-</span> <span class="fu">quanteda</span><span class="fu">::</span><span class="va"><a href="https://quanteda.io/reference/data_corpus_inaugural.html" class="external-link">data_corpus_inaugural</a></span><span class="op">[</span><span class="fl">50</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-a-workflow-with-provenance-tracking">Creating a workflow with provenance tracking<a class="anchor" aria-label="anchor" href="#creating-a-workflow-with-provenance-tracking"></a>
</h2>
<p>Let’s build a coding workflow that demonstrates the trail system.
We’ll use sentiment analysis as our example.</p>
<div class="section level3">
<h3 id="initial-coding-run">Initial coding run<a class="anchor" aria-label="anchor" href="#initial-coding-run"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For this tutorial, we'll use the built-in sentiment codebook</span></span>
<span><span class="co"># For real research, you would create a custom codebook tailored to your</span></span>
<span><span class="co"># specific research question (see the "Creating codebooks" tutorial)</span></span>
<span></span>
<span><span class="co"># Code with GPT-4o (note the 'name' parameter for tracking)</span></span>
<span><span class="va">coded1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_code.html">qlm_code</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>,</span>
<span>                   codebook <span class="op">=</span> <span class="va">data_codebook_ideology</span>,</span>
<span>                   model <span class="op">=</span> <span class="st">"openai/gpt-4o"</span>,</span>
<span>                   params <span class="op">=</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/params.html" class="external-link">params</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>                   name <span class="op">=</span> <span class="st">"initial_gpt4o"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 10 -&gt; 1 | <span style="color: #00BB00;">■■■■                            </span>   9%</span></span></code></pre>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 11 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Each qlm_coded object has a 'run' attribute with metadata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">coded1</span>, <span class="st">"run"</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "initial_gpt4o"</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">coded1</span>, <span class="st">"run"</span><span class="op">)</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">timestamp</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "2026-01-05 02:28:07 UTC"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-a-replication-chain">Creating a replication chain<a class="anchor" aria-label="anchor" href="#creating-a-replication-chain"></a>
</h3>
<p>When you use <code><a href="../../../reference/qlm_replicate.html">qlm_replicate()</a></code>, the new run automatically
links to its parent:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Replicate with GPT-4o-mini</span></span>
<span><span class="va">coded2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_replicate.html">qlm_replicate</a></span><span class="op">(</span><span class="va">coded1</span>,</span>
<span>                        model <span class="op">=</span> <span class="st">"openai/gpt-4o-mini"</span>,</span>
<span>                        name <span class="op">=</span> <span class="st">"replicate_mini"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 10 -&gt; 1 | <span style="color: #00BB00;">■■■■                            </span>   9%</span></span></code></pre>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 11 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check the parent relationship</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">coded2</span>, <span class="st">"run"</span><span class="op">)</span><span class="op">$</span><span class="va">parent</span>  <span class="co"># Shows "initial_gpt4o"</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "initial_gpt4o"</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Replicate again with different temperature</span></span>
<span><span class="va">coded3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_replicate.html">qlm_replicate</a></span><span class="op">(</span><span class="va">coded2</span>,</span>
<span>                        params <span class="op">=</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/params.html" class="external-link">params</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span>,</span>
<span>                        name <span class="op">=</span> <span class="st">"mini_temp07"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 10 -&gt; 1 | <span style="color: #00BB00;">■■■■                            </span>   9%</span></span>
<span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 11 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This creates a chain: initial_gpt4o -&gt; replicate_mini -&gt; mini_temp07</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">coded3</span>, <span class="st">"run"</span><span class="op">)</span><span class="op">$</span><span class="va">parent</span>  <span class="co"># Shows "replicate_mini"</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "replicate_mini"</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="extracting-and-displaying-provenance-trails">Extracting and displaying provenance trails<a class="anchor" aria-label="anchor" href="#extracting-and-displaying-provenance-trails"></a>
</h2>
<p>The <code><a href="../../../reference/qlm_trail.html">qlm_trail()</a></code> function extracts and displays the
complete provenance chain from your quallmer objects.</p>
<div class="section level3">
<h3 id="viewing-a-single-run">Viewing a single run<a class="anchor" aria-label="anchor" href="#viewing-a-single-run"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract trail from a single object</span></span>
<span><span class="va">trail1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_trail.html">qlm_trail</a></span><span class="op">(</span><span class="va">coded1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the trail</span></span>
<span><span class="va">trail1</span></span></code></pre></div>
<pre><code><span><span class="co">## # quallmer trail</span></span>
<span><span class="co">## Run:     initial_gpt4o</span></span>
<span><span class="co">## Created: 2026-01-05 02:28:07</span></span>
<span><span class="co">## Model:   openai/gpt-4o</span></span></code></pre>
<p>The trail displays:</p>
<ul>
<li>Run name and parent relationship</li>
<li>Creation timestamp</li>
<li>Model and parameters used</li>
</ul>
</div>
<div class="section level3">
<h3 id="reconstructing-a-complete-chain">Reconstructing a complete chain<a class="anchor" aria-label="anchor" href="#reconstructing-a-complete-chain"></a>
</h3>
<p>To see the full provenance chain, provide all objects in the
lineage:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Provide all objects to reconstruct the complete chain</span></span>
<span><span class="va">full_trail</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_trail.html">qlm_trail</a></span><span class="op">(</span><span class="va">coded3</span>, <span class="va">coded2</span>, <span class="va">coded1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print shows the complete history</span></span>
<span><span class="va">full_trail</span></span></code></pre></div>
<pre><code><span><span class="co">## # quallmer trail (3 runs)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. initial_gpt4o (original)</span></span>
<span><span class="co">##    2026-01-05 02:28 | openai/gpt-4o</span></span>
<span><span class="co">##    Codebook: Ideological scaling</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 2. replicate_mini (parent: initial_gpt4o)</span></span>
<span><span class="co">##    2026-01-05 02:28 | openai/gpt-4o-mini</span></span>
<span><span class="co">##    Codebook: Ideological scaling</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 3. mini_temp07 (parent: replicate_mini)</span></span>
<span><span class="co">##    2026-01-05 02:28 | openai/gpt-4o-mini</span></span>
<span><span class="co">##    Codebook: Ideological scaling</span></span></code></pre>
<p>The output shows:</p>
<ul>
<li>All runs in chronological order</li>
<li>Parent-child relationships</li>
<li>Model and parameter changes across runs</li>
<li>Timestamps for each step</li>
<li>Codebook used</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="assessing-robustness-of-downstream-analysis">Assessing robustness of downstream analysis<a class="anchor" aria-label="anchor" href="#assessing-robustness-of-downstream-analysis"></a>
</h2>
<p>The <code><a href="../../../reference/qlm_trail_robustness.html">qlm_trail_robustness()</a></code> function helps you assess
whether your <strong>substantive findings</strong> change across
different models or settings. Instead of just comparing raw coded values
(as qlm_compare() already does), it compares the results of your
downstream analysis (means, proportions, correlations, etc.).</p>
<div class="section level3">
<h3 id="defining-your-downstream-analysis">Defining your downstream analysis<a class="anchor" aria-label="anchor" href="#defining-your-downstream-analysis"></a>
</h3>
<p>First, define a function that performs your analysis on coded
data:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define what analysis you want to compare</span></span>
<span><span class="va">my_analysis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">coded</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    mean_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">coded</span><span class="op">$</span><span class="va">score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    sd_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">coded</span><span class="op">$</span><span class="va">score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    n_units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">coded</span><span class="op">$</span><span class="va">score</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The analysis function should:</p>
<ul>
<li>Take a <code>qlm_coded</code> object as input</li>
<li>Return a named list of numeric statistics</li>
<li>Each statistic should be a single number (e.g., mean, proportion,
correlation)</li>
</ul>
</div>
<div class="section level3">
<h3 id="computing-robustness">Computing robustness<a class="anchor" aria-label="anchor" href="#computing-robustness"></a>
</h3>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute how much your analysis results differ across models</span></span>
<span><span class="va">robustness</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_trail_robustness.html">qlm_trail_robustness</a></span><span class="op">(</span><span class="va">coded1</span>, <span class="va">coded2</span>, <span class="va">coded3</span>,</span>
<span>                                   reference <span class="op">=</span> <span class="st">"initial_gpt4o"</span>,</span>
<span>                                   analysis_fn <span class="op">=</span> <span class="va">my_analysis</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the robustness scale</span></span>
<span><span class="va">robustness</span></span></code></pre></div>
<pre><code><span><span class="co">## # Downstream Analysis Robustness</span></span>
<span><span class="co">## Reference run: initial_gpt4o</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             run  statistic  value reference_value abs_diff pct_diff</span></span>
<span><span class="co">##   initial_gpt4o mean_score  5.545           5.545  0.00000    0.000</span></span>
<span><span class="co">##   initial_gpt4o   sd_score  2.162           2.162  0.00000    0.000</span></span>
<span><span class="co">##   initial_gpt4o    n_units 11.000          11.000  0.00000    0.000</span></span>
<span><span class="co">##  replicate_mini mean_score  5.364           5.545  0.18182   -3.279</span></span>
<span><span class="co">##  replicate_mini   sd_score  1.629           2.162  0.53237  -24.628</span></span>
<span><span class="co">##  replicate_mini    n_units 11.000          11.000  0.00000    0.000</span></span>
<span><span class="co">##     mini_temp07 mean_score  5.636           5.545  0.09091    1.639</span></span>
<span><span class="co">##     mini_temp07   sd_score  1.859           2.162  0.30301  -14.017</span></span>
<span><span class="co">##     mini_temp07    n_units 11.000          11.000  0.00000    0.000</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## abs_diff: Absolute difference from reference</span></span>
<span><span class="co">## pct_diff: Percent change from reference (positive = increase)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Smaller differences indicate more robust findings.</span></span></code></pre>
<p>The output shows:</p>
<ul>
<li>
<strong>run</strong>: Name of each run</li>
<li>
<strong>statistic</strong>: Which analysis statistic (e.g.,
mean_score)</li>
<li>
<strong>value</strong>: Value from this run</li>
<li>
<strong>reference_value</strong>: Value from the reference run</li>
<li>
<strong>abs_diff</strong>: Absolute difference from reference</li>
<li>
<strong>pct_diff</strong>: Percent change from reference</li>
</ul>
</div>
<div class="section level3">
<h3 id="interpreting-robustness">Interpreting robustness<a class="anchor" aria-label="anchor" href="#interpreting-robustness"></a>
</h3>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check which statistics have large differences (&gt;5% change)</span></span>
<span><span class="va">concerning</span> <span class="op">&lt;-</span> <span class="va">robustness</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">robustness</span><span class="op">$</span><span class="va">pct_diff</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">robustness</span><span class="op">$</span><span class="va">pct_diff</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Check which are highly stable (&lt;1% change)</span></span>
<span><span class="va">stable</span> <span class="op">&lt;-</span> <span class="va">robustness</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">robustness</span><span class="op">$</span><span class="va">pct_diff</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">robustness</span><span class="op">$</span><span class="va">pct_diff</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<p><strong>Interpretation guidelines:</strong></p>
<ul>
<li>
<strong>&lt;1% difference</strong>: Highly robust, findings are very
stable</li>
<li>
<strong>1-5% difference</strong>: Good robustness, minor
variations</li>
<li>
<strong>5-10% difference</strong>: Moderate robustness, some
sensitivity</li>
<li>
<strong>&gt;10% difference</strong>: Low robustness, conclusions may
change</li>
</ul>
<p>The acceptable threshold depends on your research context and the
magnitude of effects you’re studying.</p>
</div>
</div>
<div class="section level2">
<h2 id="integrating-comparisons-and-validations">Integrating comparisons and validations<a class="anchor" aria-label="anchor" href="#integrating-comparisons-and-validations"></a>
</h2>
<p>The trail system automatically tracks comparisons and validations as
part of your workflow.</p>
<div class="section level3">
<h3 id="complete-workflow-example">Complete workflow example<a class="anchor" aria-label="anchor" href="#complete-workflow-example"></a>
</h3>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Code with two different models</span></span>
<span><span class="va">coded_gpt4o</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_code.html">qlm_code</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>,</span>
<span>                        codebook <span class="op">=</span> <span class="va">data_codebook_ideology</span>,</span>
<span>                        model <span class="op">=</span> <span class="st">"openai/gpt-4o"</span>,</span>
<span>                        params <span class="op">=</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/params.html" class="external-link">params</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>                        name <span class="op">=</span> <span class="st">"gpt4o_run"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 10 -&gt; 1 | <span style="color: #00BB00;">■■■■                            </span>   9%</span></span></code></pre>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 11 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coded_mini</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_replicate.html">qlm_replicate</a></span><span class="op">(</span><span class="va">coded_gpt4o</span>,</span>
<span>                            model <span class="op">=</span> <span class="st">"openai/gpt-4o-mini"</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"mini_run"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [working] (0 + 0) -&gt; 10 -&gt; 1 | <span style="color: #00BB00;">■■■■                            </span>   9%</span></span>
<span><span class="co">## [working] (0 + 0) -&gt; 0 -&gt; 11 | <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100%</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 2. Compare inter-rater reliability</span></span>
<span><span class="co"># Score is ordinal (0-10 scale), so use level = "ordinal"</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_compare.html">qlm_compare</a></span><span class="op">(</span><span class="va">coded_gpt4o</span>, <span class="va">coded_mini</span>,</span>
<span>                          by <span class="op">=</span> <span class="va">score</span>,</span>
<span>                          level <span class="op">=</span> <span class="st">"ordinal"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the comparison results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # Inter-rater reliability</span></span>
<span><span class="co">## # Subjects: 11 </span></span>
<span><span class="co">## # Raters:   2 </span></span>
<span><span class="co">## # Level:    ordinal </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Krippendorff's alpha: 0.6218</span></span>
<span><span class="co">## Weighted kappa:       0.6768</span></span>
<span><span class="co">## Kendall's W:          0.7761</span></span>
<span><span class="co">## Spearman's rho:       0.6458</span></span>
<span><span class="co">## Percent agreement:    0.1818</span></span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3. Validate against gold standard (if you have one)</span></span>
<span><span class="co"># gold &lt;- data.frame(.id = coded_gpt4o$.id, score = c(2, 3, 1, ...))</span></span>
<span><span class="co"># validation &lt;- qlm_validate(coded_gpt4o, gold = gold, by = score, level = "ordinal")</span></span>
<span><span class="co"># print(validation)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="viewing-complete-workflow-trail">Viewing complete workflow trail<a class="anchor" aria-label="anchor" href="#viewing-complete-workflow-trail"></a>
</h3>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get full provenance trail including comparisons</span></span>
<span><span class="va">full_trail</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_trail.html">qlm_trail</a></span><span class="op">(</span><span class="va">coded_gpt4o</span>, <span class="va">coded_mini</span>, <span class="va">comparison</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">full_trail</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # quallmer trail (3 runs)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. gpt4o_run (original)</span></span>
<span><span class="co">##    2026-01-05 02:28 | openai/gpt-4o</span></span>
<span><span class="co">##    Codebook: Ideological scaling</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 2. mini_run (parent: gpt4o_run)</span></span>
<span><span class="co">##    2026-01-05 02:28 | openai/gpt-4o-mini</span></span>
<span><span class="co">##    Codebook: Ideological scaling</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 3. comparison_2b5e12c6 (parents: gpt4o_run, mini_run)</span></span>
<span><span class="co">##    2026-01-05 02:28 | unknown</span></span>
<span><span class="co">##    Comparison: ordinal level | 11 subjects | 2 raters</span></span></code></pre>
<p>The trail shows:</p>
<ul>
<li>Parent-child relationships between runs</li>
<li>Comparison/validation summaries (level, subjects, raters, etc.)</li>
<li>Complete lineage: gpt4o_run → mini_run → comparison</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="exporting-and-documenting-your-workflow">Exporting and documenting your workflow<a class="anchor" aria-label="anchor" href="#exporting-and-documenting-your-workflow"></a>
</h2>
<p>You can export your trail for documentation and reproducibility:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract the full trail (metadata only - lightweight)</span></span>
<span><span class="va">trail</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/qlm_trail.html">qlm_trail</a></span><span class="op">(</span><span class="va">coded_gpt4o</span>, <span class="va">coded_mini</span>, <span class="va">comparison</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save as RDS for archival</span></span>
<span><span class="co"># qlm_trail_save(trail, "my_workflow_trail.rds")</span></span>
<span></span>
<span><span class="co"># For complete archival with the actual coded data:</span></span>
<span><span class="co"># trail_complete &lt;- qlm_trail(coded_gpt4o, coded_mini, comparison, include_data = TRUE)</span></span>
<span><span class="co"># qlm_trail_save(trail_complete, "my_workflow_complete.rds")</span></span>
<span></span>
<span><span class="co"># Export as JSON for portability</span></span>
<span><span class="co"># qlm_trail_export(trail, "my_workflow_trail.json")</span></span>
<span></span>
<span><span class="co"># Generate a comprehensive report</span></span>
<span><span class="co"># qlm_trail_report(trail, "my_workflow_report.qmd",</span></span>
<span><span class="co">#                  include_comparisons = TRUE,</span></span>
<span><span class="co">#                  include_validations = TRUE)</span></span></code></pre></div>
<p><strong>When to include data:</strong></p>
<ul>
<li>Use <code>include_data = FALSE</code> (default) for lightweight
documentation and lineage tracking</li>
<li>Use <code>include_data = TRUE</code> to create a complete archive
with all coded results for long-term storage or sharing</li>
</ul>
<p>The generated report includes:</p>
<ul>
<li>
<strong>Timeline</strong>: All coding runs with timestamps and model
settings</li>
<li>
<strong>Comparisons</strong>: Inter-rater reliability measures (when
<code>include_comparisons = TRUE</code>)
<ul>
<li>All relevant measures for the measurement level (alpha, kappa, ICC,
etc.)</li>
</ul>
</li>
<li>
<strong>Validations</strong>: Accuracy metrics against gold
standards (when <code>include_validations = TRUE</code>)
<ul>
<li>Level-appropriate metrics (accuracy, precision, recall, kappa, rho,
ICC, etc.)</li>
</ul>
</li>
<li>
<strong>System info</strong>: Package versions and R version for
reproducibility</li>
</ul>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The quallmer trail system automatically tracks your coding
workflow:</p>
<ul>
<li>
<strong>Provenance tracking</strong>: All runs are timestamped with
model and parameter information</li>
<li>
<strong>Parent-child links</strong>: <code><a href="../../../reference/qlm_replicate.html">qlm_replicate()</a></code>
maintains relationships between runs</li>
<li>
<strong>Quality assessment</strong>: Use <code><a href="../../../reference/qlm_compare.html">qlm_compare()</a></code>
to check agreement and <code><a href="../../../reference/qlm_trail_robustness.html">qlm_trail_robustness()</a></code> to test if
conclusions change</li>
<li>
<strong>Documentation</strong>: Export trails for methods sections
and replication packages</li>
</ul>
<p><strong>Best practices:</strong></p>
<ol style="list-style-type: decimal">
<li>Name your runs with the <code>name</code> parameter</li>
<li>Use <code><a href="../../../reference/qlm_compare.html">qlm_compare()</a></code> to assess inter-rater
reliability</li>
<li>Use <code><a href="../../../reference/qlm_trail_robustness.html">qlm_trail_robustness()</a></code> to check if your findings
are stable across models</li>
<li>Export trails for transparency and reproducibility</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Seraphine F. Maerz, Kenneth Benoit.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
