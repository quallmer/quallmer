% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qlm_codebook.R
\name{qlm_codebook}
\alias{qlm_codebook}
\title{Define a qualitative codebook}
\usage{
qlm_codebook(name, system_prompt, type_def, input_type = c("text", "image"))
}
\arguments{
\item{name}{Name of the codebook (character).}

\item{system_prompt}{System prompt to guide the model.}

\item{type_def}{Structured output definition, e.g., created by
\code{\link[ellmer:type_boolean]{ellmer::type_object()}}, \code{\link[ellmer:type_boolean]{ellmer::type_array()}}, or \code{\link[ellmer:type_boolean]{ellmer::type_enum()}}.}

\item{input_type}{Type of input data: \code{"text"} or \code{"image"}.}
}
\value{
A codebook object (a list with class \code{c("qlm_codebook", "task")})
containing the codebook definition. Use with \code{\link[=qlm_code]{qlm_code()}} to apply the
codebook to data.
}
\description{
Creates a codebook definition for use with \code{\link[=qlm_code]{qlm_code()}}. A codebook specifies
what information to extract from input data, including the system prompt
that guides the LLM and the structured output definition.
}
\details{
This function replaces \code{\link[=task]{task()}}, which is now deprecated. The returned object
has dual class inheritance (\code{c("qlm_codebook", "task")}) to maintain
backward compatibility with existing code using \code{\link[=annotate]{annotate()}}.
}
\examples{
\dontrun{
# Define a custom codebook
my_codebook <- qlm_codebook(
  name = "Sentiment",
  system_prompt = "Rate the sentiment from -1 (negative) to 1 (positive).",
  type_def = ellmer::type_object(
    score = ellmer::type_number("Sentiment score from -1 to 1"),
    explanation = ellmer::type_string("Brief explanation")
  )
)

# Use with qlm_code()
texts <- c("I love this!", "This is terrible.")
coded <- qlm_code(texts, my_codebook, model_name = "openai/gpt-4o-mini")
qlm_results(coded)
}

}
\seealso{
\code{\link[=qlm_code]{qlm_code()}} for applying codebooks to data, \code{\link[=task_sentiment]{task_sentiment()}},
\code{\link[=task_stance]{task_stance()}}, \code{\link[=task_ideology]{task_ideology()}}, \code{\link[=task_salience]{task_salience()}}, \code{\link[=task_fact]{task_fact()}}
for predefined codebooks, \code{\link[=task]{task()}} for the deprecated function.
}
