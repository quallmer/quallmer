% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qlm_trace.R
\name{qlm_trace}
\alias{qlm_trace}
\title{Extract provenance trace from quallmer objects}
\usage{
qlm_trace(
  ...,
  include_data = FALSE,
  save = NULL,
  export = NULL,
  report = NULL,
  include_comparisons = FALSE,
  include_validations = FALSE,
  robustness = NULL
)
}
\arguments{
\item{...}{One or more quallmer objects (\code{qlm_coded}, \code{qlm_comparison}, or
\code{qlm_validation}). When multiple objects are provided, they will be used
to reconstruct the complete provenance chain.}

\item{include_data}{Logical. If \code{TRUE}, stores the actual coded data alongside
the metadata. This allows you to archive complete results. Default is \code{FALSE}
to keep trace objects lightweight.}

\item{save}{Optional file path to save the trace as an RDS file. If provided,
automatically calls \code{qlm_trace_save()}.}

\item{export}{Optional file path to export the trace as JSON. If provided,
automatically calls \code{qlm_trace_export()}.}

\item{report}{Optional file path (\code{.qmd} or \code{.Rmd}) to generate a report.
If provided, automatically calls \code{qlm_trace_report()}.}

\item{include_comparisons}{Logical. If \code{TRUE} and \code{report} is specified,
include comparison metrics in the report. Default is \code{FALSE}.}

\item{include_validations}{Logical. If \code{TRUE} and \code{report} is specified,
include validation metrics in the report. Default is \code{FALSE}.}

\item{robustness}{Optional. A \code{qlm_robustness} object to include in the report.
Only used if \code{report} is specified.}
}
\value{
A \code{qlm_trace} object containing:
\describe{
\item{runs}{List of run information, ordered from oldest to newest}
\item{complete}{Logical indicating whether all parent references were resolved}
}
}
\description{
Extracts and displays the provenance chain from one or more \code{qlm_coded},
\code{qlm_comparison}, or \code{qlm_validation} objects. When multiple objects are
provided, attempts to reconstruct the full lineage by matching parent-child
relationships. Optionally saves, exports, or generates reports in one call.
}
\details{
The provenance trace shows the history of coding runs, including:
\itemize{
\item Run name and parent relationship
\item Model and parameters used
\item Timestamp
\item Call that created the run
}

When a single object is provided, only its immediate lineage (name, parent,
timestamp) is shown. To see the full chain, provide all ancestor objects.

For branching workflows (e.g., when multiple coded objects are compared),
the trace captures all input runs as parents of the comparison.
}
\examples{
\dontrun{
# Single run shows immediate info
coded1 <- qlm_code(reviews, codebook, model = "openai/gpt-4o")
qlm_trace(coded1)

# Create replication chain
coded2 <- qlm_replicate(coded1, model = "openai/gpt-4o-mini")
coded3 <- qlm_replicate(coded2, temperature = 0.7)

# Reconstruct full chain
trace <- qlm_trace(coded3, coded2, coded1)
print(trace)

# Convenience: save and export in one call
qlm_trace(coded3, coded2, coded1,
          save = "trace.rds",
          export = "trace.json")

# Generate complete report with all metrics
qlm_trace(coded3, coded2, coded1,
          report = "trace.qmd",
          include_comparisons = TRUE,
          include_validations = TRUE)

# Or use separate functions for more control
trace <- qlm_trace(coded3, coded2, coded1, include_data = TRUE)
qlm_trace_save(trace, "trace_complete.rds")
qlm_trace_export(trace, "trace.json")
}

}
\seealso{
\code{\link[=qlm_replicate]{qlm_replicate()}}, \code{\link[=qlm_code]{qlm_code()}}, \code{\link[=qlm_compare]{qlm_compare()}}, \code{\link[=qlm_validate]{qlm_validate()}},
\code{\link[=qlm_trace_save]{qlm_trace_save()}}, \code{\link[=qlm_trace_export]{qlm_trace_export()}}, \code{\link[=qlm_trace_report]{qlm_trace_report()}}
}
