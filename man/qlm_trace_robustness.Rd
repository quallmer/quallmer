% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qlm_trace.R
\name{qlm_trace_robustness}
\alias{qlm_trace_robustness}
\title{Compute robustness scale showing downstream analysis changes}
\usage{
qlm_trace_robustness(..., reference, analysis_fn)
}
\arguments{
\item{...}{One or more \code{qlm_coded} objects. The objects should be the actual
coded results (not just the trace). Must include the reference run.}

\item{reference}{Character string naming the reference run to compare against.
This should match the \code{name} attribute of one of the provided objects.}

\item{analysis_fn}{A function that takes a \code{qlm_coded} object and returns
a named list or data frame of analysis results. The function will be applied
to each coded object to compute downstream statistics.}
}
\value{
A data frame with robustness metrics:
\describe{
\item{run}{Name of the run}
\item{statistic}{Name of the analysis statistic}
\item{value}{Value from this run}
\item{reference_value}{Value from reference run}
\item{abs_diff}{Absolute difference from reference}
\item{pct_diff}{Percent difference from reference (NULL if reference is 0)}
}
}
\description{
Assesses how much downstream analysis results vary across different coding
runs. This helps determine whether substantive conclusions are robust to
different models, parameters, or codebook variations.
}
\details{
Robustness is assessed by:
\enumerate{
\item Applying your analysis function to each coded object
\item Comparing the resulting statistics to the reference run
\item Computing absolute and percentage differences
}

Smaller differences indicate more robust findings that don't depend heavily
on model choice. Large differences suggest your conclusions may be sensitive
to which model or settings you use.

The \code{analysis_fn} should return a named list or data frame where each element
is a single numeric value representing a statistic of interest (e.g., mean,
proportion, correlation coefficient, regression coefficient).
}
\examples{
\dontrun{
# Create multiple coded versions
coded1 <- qlm_code(texts, codebook, model = "openai/gpt-4o",
                   name = "gpt4o_run")
coded2 <- qlm_replicate(coded1, model = "openai/gpt-4o-mini",
                        name = "mini_run")
coded3 <- qlm_replicate(coded1, temperature = 0.7,
                        name = "temp07_run")

# Define downstream analysis function
my_analysis <- function(coded) {
  list(
    mean_score = mean(coded$score, na.rm = TRUE),
    prop_positive = mean(coded$sentiment == "positive", na.rm = TRUE),
    sd_score = sd(coded$score, na.rm = TRUE)
  )
}

# Compute robustness
robustness <- qlm_trace_robustness(coded1, coded2, coded3,
                                   reference = "gpt4o_run",
                                   analysis_fn = my_analysis)
print(robustness)
}

}
\seealso{
\code{\link[=qlm_trace]{qlm_trace()}}, \code{\link[=qlm_compare]{qlm_compare()}}
}
